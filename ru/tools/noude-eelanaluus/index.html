<!doctype html>
<html lang="ru">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>–ü—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω—ã–π –∞–Ω–∞–ª–∏–∑ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è ‚Äî Solvere Lab</title>
  <link rel="stylesheet" href="/assets/site.css" />

  <!-- Privacy-friendly analytics by Plausible -->
  <script async src="https://plausible.io/js/pa-pjc0qZXxUiq_r44m96Ana.js"></script>
  <script>
    window.plausible = window.plausible || function () {
      (plausible.q = plausible.q || []).push(arguments);
    };
    plausible.init();
  </script>

  <!-- Language switcher logic (ET / RU) -->
  <script>
  document.addEventListener("DOMContentLoaded", () => {
    const isRU = location.pathname.startsWith("/ru/");
    const current = isRU ? "ru" : "et";

    document.querySelectorAll(".langswitch a[data-lang]").forEach(a => {
      a.classList.toggle("active", a.dataset.lang === current);
    });
  });
  </script>
</head>

<body class="page-tool">
<main class="container" id="app">

<!-- Tool navigation (RU) -->
<nav class="tool-nav" aria-label="–í—Ç–æ—Ä–∏—á–Ω–∞—è –Ω–∞–≤–∏–≥–∞—Ü–∏—è">
  <a href="/ru/" class="tool-nav__link">‚Üê –ì–ª–∞–≤–Ω–∞—è</a>
  <span class="tool-nav__sep">¬∑</span>
  <a href="/ru/metoodika/" class="tool-nav__link">–ú–µ—Ç–æ–¥–∏–∫–∞</a>
</nav>

<!-- Language switch (ET / RU) -->
<nav class="langswitch" aria-label="–Ø–∑—ã–∫">
  <a href="/tools/noude-eelanaluus/" data-lang="et">ET</a>
  <span class="langswitch__sep" aria-hidden="true">¬∑</span>
  <a href="/ru/tools/noude-eelanaluus/" data-lang="ru">RU</a>
</nav>

  <!-- HEADER / INTRO -->
  <header class="pagehead">
    <h1>–ü—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω—ã–π –∞–Ω–∞–ª–∏–∑ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è</h1>
    <p class="lead">
      –°—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –ø—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω—ã–π –∞–Ω–∞–ª–∏–∑ –ø–µ—Ä–µ–¥ –æ–±—Ä–∞—â–µ–Ω–∏–µ–º –≤ —Å—É–¥: –æ—Å–Ω–æ–≤–∞–Ω–∏–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è, —Ä–∏—Å–∫–∏ –∏ –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ—Å—Ç—å –¥–æ–∫–∞–∑–∞—Ç–µ–ª—å—Å—Ç–≤.
    </p>

    <div class="notice notice--neutral" role="note" aria-label="–í–∞–∂–Ω–æ–µ –ø—Ä–∏–º–µ—á–∞–Ω–∏–µ">
      –≠—Ç–æ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–æ–Ω–Ω—ã–π –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –ø—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω–æ–≥–æ –∞–Ω–∞–ª–∏–∑–∞. –û–Ω –Ω–µ –∑–∞–º–µ–Ω—è–µ—Ç –∏–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω—É—é —é—Ä–∏–¥–∏—á–µ—Å–∫—É—é –∫–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏—é –∏ –Ω–µ –ø—Ä–æ–≥–Ω–æ–∑–∏—Ä—É–µ—Ç –∏—Å—Ö–æ–¥ –¥–µ–ª–∞.
      –û—Ç–≤–µ—Ç—ã —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è —Ç–æ–ª—å–∫–æ –≤ –í–∞—à–µ–º –±—Ä–∞—É–∑–µ—Ä–µ –∏ –Ω–µ –ø–µ—Ä–µ–¥–∞—é—Ç—Å—è –Ω–∞ —Å–µ—Ä–≤–µ—Ä.
    </div>

    <div class="actions">
      <button type="button" class="btn btn-primary" id="btnStart">–ù–∞—á–∞—Ç—å –∞–Ω–∞–ª–∏–∑</button>
    </div>
  </header>

  <!-- PROGRESS -->
  <section class="progresswrap" aria-label="–ü—Ä–æ–≥—Ä–µ—Å—Å">
    <div class="progressbar" role="progressbar" aria-valuemin="0" aria-valuemax="6" aria-valuenow="0">
      <div class="progressbar__fill" id="progressFill" style="width:0%"></div>
    </div>
    <div class="progressmeta">
      <span id="progressLabel">–®–∞–≥ 0 / 6</span>
    </div>
  </section>

  <!-- STEPS -->
  <section class="steps" id="steps" aria-label="–ê–Ω–∫–µ—Ç–∞" hidden>

    <!-- STEP 1 -->
    <article class="step" data-step="1" aria-labelledby="s1-title" hidden>
      <header class="step__head">
        <h2 id="s1-title">1. –û—Å–Ω–æ–≤–∞–Ω–∏–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è</h2>
        <button type="button" class="infoToggle" data-info="s1-info" aria-expanded="false" aria-controls="s1-info">(i)</button>
      </header>

      <div class="step__info" id="s1-info" hidden>
        –û–±—è–∑–∞—Ç–µ–ª—å—Å—Ç–≤–æ ‚Äî —ç—Ç–æ –æ–±–µ—â–∞–Ω–∏–µ –∏–ª–∏ –¥–æ–≥–æ–≤–æ—Ä–Ω–∞—è/–∑–∞–∫–æ–Ω–Ω–∞—è –æ–±—è–∑–∞–Ω–Ω–æ—Å—Ç—å –¥—Ä—É–≥–æ–π —Å—Ç–æ—Ä–æ–Ω—ã —á—Ç–æ-—Ç–æ —Å–¥–µ–ª–∞—Ç—å, –Ω–µ —Å–¥–µ–ª–∞—Ç—å –∏–ª–∏ –≤–æ–∑–º–µ—Å—Ç–∏—Ç—å —É—â–µ—Ä–±.
        –ï—Å–ª–∏ —Å–æ–¥–µ—Ä–∂–∞–Ω–∏–µ –æ–±—è–∑–∞—Ç–µ–ª—å—Å—Ç–≤–∞ –Ω–µ—è—Å–Ω–æ, —Ç—Ä–µ–±–æ–≤–∞–Ω–∏–µ –º–æ–∂–µ—Ç –±—ã—Ç—å —Å–ª–∞–±–µ–µ.
      </div>

      <fieldset class="q" aria-label="–í–æ–ø—Ä–æ—Å –æ–± –æ—Å–Ω–æ–≤–∞–Ω–∏–∏ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è">
        <legend class="q__legend">–ë—ã–ª–æ –ª–∏ —É –¥—Ä—É–≥–æ–π —Å—Ç–æ—Ä–æ–Ω—ã –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–µ –æ–±—è–∑–∞—Ç–µ–ª—å—Å—Ç–≤–æ, –∏—Å–ø–æ–ª–Ω–µ–Ω–∏—è –∫–æ—Ç–æ—Ä–æ–≥–æ –í—ã —Ç—Ä–µ–±—É–µ—Ç–µ?</legend>

        <label class="opt"><input type="radio" name="basis" value="3" /><span>–î–∞, –æ–±—è–∑–∞—Ç–µ–ª—å—Å—Ç–≤–æ –∑–∞—Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–æ –ø–∏—Å—å–º–µ–Ω–Ω–æ</span></label>
        <label class="opt"><input type="radio" name="basis" value="2" /><span>–î–∞, –æ–±—è–∑–∞—Ç–µ–ª—å—Å—Ç–≤–æ –±—ã–ª–æ —Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–æ —É—Å—Ç–Ω–æ</span></label>
        <label class="opt"><input type="radio" name="basis" value="1" /><span>–°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ –æ–±—è–∑–∞—Ç–µ–ª—å—Å—Ç–≤–∞ –Ω–µ—è—Å–Ω–æ</span></label>
        <label class="opt"><input type="radio" name="basis" value="0" /><span>–ß—ë—Ç–∫–æ –æ–ø—Ä–µ–¥–µ–ª—è–µ–º–æ–≥–æ –æ–±—è–∑–∞—Ç–µ–ª—å—Å—Ç–≤–∞ –Ω–µ—Ç</span></label>
      </fieldset>

      <footer class="step__nav">
        <button type="button" class="btn" data-action="back" disabled>–ù–∞–∑–∞–¥</button>
        <button type="button" class="btn btn-primary" data-action="next">–î–∞–ª–µ–µ</button>
      </footer>
    </article>

    <!-- STEP 2 -->
    <article class="step" data-step="2" aria-labelledby="s2-title" hidden>
      <header class="step__head">
        <h2 id="s2-title">2. –ù–∞—Ä—É—à–µ–Ω–∏–µ –æ–±—è–∑–∞—Ç–µ–ª—å—Å—Ç–≤–∞</h2>
        <button type="button" class="infoToggle" data-info="s2-info" aria-expanded="false" aria-controls="s2-info">(i)</button>
      </header>

      <div class="step__info" id="s2-info" hidden>
        –ù–∞—Ä—É—à–µ–Ω–∏–µ –æ–∑–Ω–∞—á–∞–µ—Ç, —á—Ç–æ –æ–±—è–∑–∞—Ç–µ–ª—å—Å—Ç–≤–æ –Ω–µ –∏—Å–ø–æ–ª–Ω–µ–Ω–æ, –∏—Å–ø–æ–ª–Ω–µ–Ω–æ –Ω–µ–Ω–∞–¥–ª–µ–∂–∞—â–∏–º –æ–±—Ä–∞–∑–æ–º –∏–ª–∏ —Å –ø—Ä–æ—Å—Ä–æ—á–∫–æ–π.
        –ù–∞—Ä—É—à–µ–Ω–∏–µ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å –æ–ø–∏—Å—É–µ–º–æ –∏ —Å–æ–æ—Ç–Ω–µ—Å–µ–Ω–æ —Å –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–º –æ–±—è–∑–∞—Ç–µ–ª—å—Å—Ç–≤–æ–º.
      </div>

      <fieldset class="q" aria-label="–í–æ–ø—Ä–æ—Å –æ –Ω–∞—Ä—É—à–µ–Ω–∏–∏">
        <legend class="q__legend">–ë—ã–ª–æ –ª–∏ –Ω–∞—Ä—É—à–µ–Ω–∏–µ –∏ –º–æ–∂–Ω–æ –ª–∏ –µ–≥–æ –æ–ø–∏—Å–∞—Ç—å?</legend>

        <label class="opt"><input type="radio" name="breach" value="3" /><span>–ù–∞—Ä—É—à–µ–Ω–∏–µ —è—Å–Ω–æ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ –∏ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–æ</span></label>
        <label class="opt"><input type="radio" name="breach" value="2" /><span>–ù–∞—Ä—É—à–µ–Ω–∏–µ –≤–µ—Ä–æ—è—Ç–Ω–æ, –Ω–æ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–æ –Ω–µ –ø–æ–ª–Ω–æ—Å—Ç—å—é</span></label>
        <label class="opt"><input type="radio" name="breach" value="1" /><span>–ù–∞—Ä—É—à–µ–Ω–∏–µ —Å–ø–æ—Ä–Ω–æ–µ</span></label>
        <label class="opt"><input type="radio" name="breach" value="0" /><span>–ù–∞–ª–∏—á–∏–µ –Ω–∞—Ä—É—à–µ–Ω–∏—è –Ω–µ—è—Å–Ω–æ</span></label>
      </fieldset>

      <footer class="step__nav">
        <button type="button" class="btn" data-action="back">–ù–∞–∑–∞–¥</button>
        <button type="button" class="btn btn-primary" data-action="next">–î–∞–ª–µ–µ</button>
      </footer>
    </article>

    <!-- STEP 3 -->
    <article class="step" data-step="3" aria-labelledby="s3-title" hidden>
      <header class="step__head">
        <h2 id="s3-title">3. –£–±—ã—Ç–∫–∏ / —Å—É–º–º–∞ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è</h2>
        <button type="button" class="infoToggle" data-info="s3-info" aria-expanded="false" aria-controls="s3-info">(i)</button>
      </header>

      <div class="step__info" id="s3-info" hidden>
        –£–±—ã—Ç–∫–∏ –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –æ–ø—Ä–µ–¥–µ–ª–∏–º—ã –≤ –¥–µ–Ω–µ–∂–Ω–æ–º –≤—ã—Ä–∞–∂–µ–Ω–∏–∏.
        –°—É–º–º–∞ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å —Ä–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ–º–æ–π –∏ –æ–±–æ—Å–Ω–æ–≤–∞–Ω–Ω–æ–π, –∞ –Ω–µ –ø—Ä–µ–¥–ø–æ–ª–æ–∂–µ–Ω–∏–µ–º.
      </div>

      <fieldset class="q" aria-label="–í–æ–ø—Ä–æ—Å –æ —Å—É–º–º–µ">
        <legend class="q__legend">–û–ø—Ä–µ–¥–µ–ª–µ–Ω–∞ –ª–∏ —Å—É–º–º–∞ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è –∏ –º–æ–∂–Ω–æ –ª–∏ –µ—ë –æ–±–æ—Å–Ω–æ–≤–∞—Ç—å?</legend>

        <label class="opt"><input type="radio" name="damage" value="3" /><span>–°—É–º–º–∞ —Ç–æ—á–Ω–æ —Ä–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ—Ç—Å—è –∏ –æ–±–æ—Å–Ω–æ–≤–∞–Ω–∞</span></label>
        <label class="opt"><input type="radio" name="damage" value="2" /><span>–°—É–º–º—É –º–æ–∂–Ω–æ —Ä–∞—Å—Å—á–∏—Ç–∞—Ç—å –ø—Ä–∏–±–ª–∏–∑–∏—Ç–µ–ª—å–Ω–æ</span></label>
        <label class="opt"><input type="radio" name="damage" value="1" /><span>–°—É–º–º–∞ —Ä–∞—Å–ø–ª—ã–≤—á–∞—Ç–∞</span></label>
        <label class="opt"><input type="radio" name="damage" value="0" /><span>–°—É–º–º–∞ –Ω–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∞ –≤ –¥–µ–Ω–µ–∂–Ω–æ–º –≤—ã—Ä–∞–∂–µ–Ω–∏–∏</span></label>
      </fieldset>

      <footer class="step__nav">
        <button type="button" class="btn" data-action="back">–ù–∞–∑–∞–¥</button>
        <button type="button" class="btn btn-primary" data-action="next">–î–∞–ª–µ–µ</button>
      </footer>
    </article>

    <!-- STEP 4 (weighted x2) -->
    <article class="step step--weighted" data-step="4" aria-labelledby="s4-title" hidden>
      <header class="step__head">
        <h2 id="s4-title">4. –ù–∞–ª–∏—á–∏–µ –¥–æ–∫–∞–∑–∞—Ç–µ–ª—å—Å—Ç–≤</h2>
        <button type="button" class="infoToggle" data-info="s4-info" aria-expanded="false" aria-controls="s4-info">(i)</button>
      </header>

      <div class="step__info" id="s4-info" hidden>
        –î–æ–∫–∞–∑–∞—Ç–µ–ª—å—Å—Ç–≤–∞ –º–æ–≥—É—Ç –≤–∫–ª—é—á–∞—Ç—å –¥–æ–∫—É–º–µ–Ω—Ç—ã, –ø–µ—Ä–µ–ø–∏—Å–∫—É, —Å—á–µ—Ç–∞, –¥–æ–≥–æ–≤–æ—Ä—ã –∏ –¥—Ä—É–≥–∏–µ –æ–±—ä–µ–∫—Ç–∏–≤–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ.
        –í —Å—É–¥–µ –æ—Ü–µ–Ω–∏–≤–∞—é—Ç –ø—Ä–µ–∂–¥–µ –≤—Å–µ–≥–æ –Ω–∞–ª–∏—á–∏–µ –∏ –Ω–∞–¥—ë–∂–Ω–æ—Å—Ç—å –¥–æ–∫–∞–∑–∞—Ç–µ–ª—å—Å—Ç–≤.
      </div>

      <fieldset class="q" aria-label="–í–æ–ø—Ä–æ—Å –æ –¥–æ–∫–∞–∑–∞—Ç–µ–ª—å—Å—Ç–≤–∞—Ö">
        <legend class="q__legend">–ö–∞–∫–∏–µ –¥–æ–∫–∞–∑–∞—Ç–µ–ª—å—Å—Ç–≤–∞ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–∞—é—Ç –í–∞—à—É –ø–æ–∑–∏—Ü–∏—é?</legend>

        <label class="opt"><input type="radio" name="evidence" value="3" /><span>–ù–µ—Å–∫–æ–ª—å–∫–æ –ø–∏—Å—å–º–µ–Ω–Ω—ã—Ö –∏–ª–∏ –æ–±—ä–µ–∫—Ç–∏–≤–Ω—ã—Ö –¥–æ–∫–∞–∑–∞—Ç–µ–ª—å—Å—Ç–≤</span></label>
        <label class="opt"><input type="radio" name="evidence" value="2" /><span>–ï—Å—Ç—å –Ω–µ–∫–æ—Ç–æ—Ä—ã–µ –¥–æ–∫–∞–∑–∞—Ç–µ–ª—å—Å—Ç–≤–∞</span></label>
        <label class="opt"><input type="radio" name="evidence" value="1" /><span>–û–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω—ã–µ –∏–ª–∏ –∫–æ—Å–≤–µ–Ω–Ω—ã–µ –¥–æ–∫–∞–∑–∞—Ç–µ–ª—å—Å—Ç–≤–∞</span></label>
        <label class="opt"><input type="radio" name="evidence" value="0" /><span>–î–æ–∫–∞–∑–∞—Ç–µ–ª—å—Å—Ç–≤ –Ω–µ—Ç</span></label>
      </fieldset>

      <footer class="step__nav">
        <button type="button" class="btn" data-action="back">–ù–∞–∑–∞–¥</button>
        <button type="button" class="btn btn-primary" data-action="next">–î–∞–ª–µ–µ</button>
      </footer>
    </article>

    <!-- STEP 5 -->
    <article class="step" data-step="5" aria-labelledby="s5-title" hidden>
      <header class="step__head">
        <h2 id="s5-title">5. –í–æ–∑–º–æ–∂–Ω—ã–µ –≤–æ–∑—Ä–∞–∂–µ–Ω–∏—è</h2>
        <button type="button" class="infoToggle" data-info="s5-info" aria-expanded="false" aria-controls="s5-info">(i)</button>
      </header>

      <div class="step__info" id="s5-info" hidden>
        –í–æ–∑—Ä–∞–∂–µ–Ω–∏—è ‚Äî —ç—Ç–æ –∞—Ä–≥—É–º–µ–Ω—Ç—ã –¥—Ä—É–≥–æ–π —Å—Ç–æ—Ä–æ–Ω—ã –ø—Ä–æ—Ç–∏–≤ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è.
        –ù–∞–ø—Ä–∏–º–µ—Ä: –æ–±—è–∑–∞—Ç–µ–ª—å—Å—Ç–≤–∞ –Ω–µ –±—ã–ª–æ, —É—â–µ—Ä–±–∞ –Ω–µ—Ç –∏–ª–∏ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏–µ –ø—Ä–æ—Å—Ä–æ—á–µ–Ω–æ.
      </div>

      <fieldset class="q" aria-label="–í–æ–ø—Ä–æ—Å –æ –≤–æ–∑—Ä–∞–∂–µ–Ω–∏—è—Ö">
        <legend class="q__legend">–ù–∞—Å–∫–æ–ª—å–∫–æ –≤–µ—Ä–æ—è—Ç–Ω–æ, —á—Ç–æ –¥—Ä—É–≥–∞—è —Å—Ç–æ—Ä–æ–Ω–∞ —Å–º–æ–∂–µ—Ç –ø—Ä–µ–¥—Å—Ç–∞–≤–∏—Ç—å —Å–∏–ª—å–Ω—ã–µ –≤–æ–∑—Ä–∞–∂–µ–Ω–∏—è?</legend>

        <label class="opt"><input type="radio" name="defenses" value="3" /><span>–ú–∞–ª–æ–≤–µ—Ä–æ—è—Ç–Ω–æ</span></label>
        <label class="opt"><input type="radio" name="defenses" value="2" /><span>–í–æ–∑–º–æ–∂–Ω–æ</span></label>
        <label class="opt"><input type="radio" name="defenses" value="1" /><span>–í–µ—Ä–æ—è—Ç–Ω–æ</span></label>
        <label class="opt"><input type="radio" name="defenses" value="0" /><span>–û—á–µ–Ω—å –≤–µ—Ä–æ—è—Ç–Ω–æ</span></label>
      </fieldset>

      <footer class="step__nav">
        <button type="button" class="btn" data-action="back">–ù–∞–∑–∞–¥</button>
        <button type="button" class="btn btn-primary" data-action="next">–î–∞–ª–µ–µ</button>
      </footer>
    </article>

    <!-- STEP 6 (weighted x2) -->
    <article class="step step--weighted" data-step="6" aria-labelledby="s6-title" hidden>
      <header class="step__head">
        <h2 id="s6-title">6. –°—Ä–æ–∫ –¥–∞–≤–Ω–æ—Å—Ç–∏</h2>
        <button type="button" class="infoToggle" data-info="s6-info" aria-expanded="false" aria-controls="s6-info">(i)</button>
      </header>

    <div class="step__info" id="s6-info" hidden>
  –°—Ä–æ–∫ –∏—Å–∫–æ–≤–æ–π –¥–∞–≤–Ω–æ—Å—Ç–∏ –æ–∑–Ω–∞—á–∞–µ—Ç, —á—Ç–æ –ø–æ –∏—Å—Ç–µ—á–µ–Ω–∏–∏ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω–æ–≥–æ —Å—Ä–æ–∫–∞
  –ø—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ–µ –≤–∑—ã—Å–∫–∞–Ω–∏–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è –º–æ–∂–µ—Ç –±—ã—Ç—å –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–æ.
  –ö–∞–∫ –ø—Ä–∞–≤–∏–ª–æ, –æ–±—â–∏–π —Å—Ä–æ–∫ –∏—Å–∫–æ–≤–æ–π –¥–∞–≤–Ω–æ—Å—Ç–∏ —Å–æ—Å—Ç–∞–≤–ª—è–µ—Ç 3 –≥–æ–¥–∞,
  –æ–¥–Ω–∞–∫–æ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π —Å—Ä–æ–∫ –∑–∞–≤–∏—Å–∏—Ç –æ—Ç –≤–∏–¥–∞ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è –∏ –æ–±—Å—Ç–æ—è—Ç–µ–ª—å—Å—Ç–≤ –¥–µ–ª–∞.
  –ï—Å–ª–∏ –í—ã –Ω–µ —É–≤–µ—Ä–µ–Ω—ã –≤ –¥–∞—Ç–∞—Ö, –ø—Ä–µ–¥–ø–æ—á—Ç–∏—Ç–µ–ª—å–Ω–æ –≤—ã–±—Ä–∞—Ç—å –≤–∞—Ä–∏–∞–Ω—Ç ¬´–í–æ–∑–º–æ–∂–Ω–æ¬ª.
</div>

      <fieldset class="q" aria-label="–í–æ–ø—Ä–æ—Å –æ —Å—Ä–æ–∫–µ –¥–∞–≤–Ω–æ—Å—Ç–∏">
        <legend class="q__legend">–í–æ–∑–º–æ–∂–Ω–æ –ª–∏, —á—Ç–æ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏–µ –ø—Ä–æ—Å—Ä–æ—á–µ–Ω–æ –∏–ª–∏ —Å—Ä–æ–∫ –¥–∞–≤–Ω–æ—Å—Ç–∏ –±–ª–∏–∑–æ–∫?</legend>

        <label class="opt"><input type="radio" name="limitation" value="3" /><span>–ù–µ—Ç ‚Äî —Å–∏—Ç—É–∞—Ü–∏—è –Ω–µ–¥–∞–≤–Ω—è—è –∏ –¥–∞—Ç—ã —è—Å–Ω—ã</span></label>
        <label class="opt"><input type="radio" name="limitation" value="2" /><span>–ú–∞–ª–æ–≤–µ—Ä–æ—è—Ç–Ω–æ ‚Äî –¥–µ–ª–æ –Ω–µ —Å—Ç–∞—Ä–æ–µ, –Ω–æ –Ω–µ –≤—Å–µ –¥–∞—Ç—ã –ø–æ–ª–Ω–æ—Å—Ç—å—é —è—Å–Ω—ã</span></label>
        <label class="opt"><input type="radio" name="limitation" value="1" /><span>–í–æ–∑–º–æ–∂–Ω–æ ‚Äî –¥–∞—Ç—ã –Ω–µ—è—Å–Ω—ã –∏–ª–∏ —Å–∏—Ç—É–∞—Ü–∏—è –º–æ–∂–µ—Ç –±—ã—Ç—å –±–æ–ª–µ–µ –¥–∞–≤–Ω–µ–π</span></label>
        <label class="opt"><input type="radio" name="limitation" value="0" /><span>–í–µ—Ä–æ—è—Ç–Ω–æ ‚Äî —Å–∏—Ç—É–∞—Ü–∏—è –¥–∞–≤–Ω—è—è –∏–ª–∏ —Ä–∏—Å–∫ –¥–∞–≤–Ω–æ—Å—Ç–∏ –æ—á–µ–≤–∏–¥–µ–Ω</span></label>
      </fieldset>

      <footer class="step__nav">
        <button type="button" class="btn" data-action="back">–ù–∞–∑–∞–¥</button>
        <button type="button" class="btn btn-primary" data-action="finish">–ü–æ–∫–∞–∑–∞—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç</button>
      </footer>
    </article>

  </section>

  <!-- RESULTS -->
  <section class="results" id="results" aria-label="–†–µ–∑—É–ª—å—Ç–∞—Ç" hidden>

    <header class="results__head">
      <h2>–†–µ–∑—É–ª—å—Ç–∞—Ç</h2>
      <p class="muted">
        –û—Ü–µ–Ω–∫–∞ –æ—Å–Ω–æ–≤–∞–Ω–∞ –Ω–∞ –≤–∑–≤–µ—à–µ–Ω–Ω—ã—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞—Ö —Ä–∏—Å–∫–∞, –≤–∫–ª—é—á–∞—è –¥–æ–∫–∞–∑–∞—Ç–µ–ª—å—Å—Ç–≤–∞ –∏ —Å—Ä–æ–∫ –¥–∞–≤–Ω–æ—Å—Ç–∏.
      </p>
    </header>

    <div class="card overall" id="overallCard" data-level="unknown">
      <div class="overall__badge" id="overallBadge" aria-label="–ò–Ω–¥–∏–∫–∞—Ç–æ—Ä –æ–±—â–µ–π –æ—Ü–µ–Ω–∫–∏">‚Äî</div>
      <div class="overall__text">
        <div class="overall__title" id="overallTitle">–û–±—â–∏–π –ø—Ä–æ—Ñ–∏–ª—å —Ä–∏—Å–∫–∞</div>
        <div class="overall__desc" id="overallDesc">–ó–∞–ø–æ–ª–Ω–∏—Ç–µ –∞–Ω–∫–µ—Ç—É, —á—Ç–æ–±—ã —É–≤–∏–¥–µ—Ç—å –æ—Ü–µ–Ω–∫—É.</div>
      </div>
    </div>

    <div class="grid grid-2x3" id="riskGrid">

      <div class="card metric" id="m-basis" data-level="unknown">
        <div class="metric__head"><div class="metric__name">–û—Å–Ω–æ–≤–∞–Ω–∏–µ</div><div class="metric__dot"></div></div>
        <div class="metric__label" id="m-basis-label">‚Äî</div>
        <div class="metric__note" id="m-basis-note">‚Äî</div>
      </div>

      <div class="card metric" id="m-breach" data-level="unknown">
        <div class="metric__head"><div class="metric__name">–ù–∞—Ä—É—à–µ–Ω–∏–µ</div><div class="metric__dot"></div></div>
        <div class="metric__label" id="m-breach-label">‚Äî</div>
        <div class="metric__note" id="m-breach-note">‚Äî</div>
      </div>

      <div class="card metric" id="m-damage" data-level="unknown">
        <div class="metric__head"><div class="metric__name">–£–±—ã—Ç–∫–∏</div><div class="metric__dot"></div></div>
        <div class="metric__label" id="m-damage-label">‚Äî</div>
        <div class="metric__note" id="m-damage-note">‚Äî</div>
      </div>

      <div class="card metric" id="m-defenses" data-level="unknown">
        <div class="metric__head"><div class="metric__name">–í–æ–∑—Ä–∞–∂–µ–Ω–∏—è</div><div class="metric__dot"></div></div>
        <div class="metric__label" id="m-defenses-label">‚Äî</div>
        <div class="metric__note" id="m-defenses-note">‚Äî</div>
      </div>

      <div class="card metric metric--weighted" id="m-evidence" data-level="unknown">
        <div class="metric__head"><div class="metric__name">–î–æ–∫–∞–∑–∞—Ç–µ–ª—å—Å—Ç–≤–∞</div><div class="metric__dot"></div></div>
        <div class="metric__label" id="m-evidence-label">‚Äî</div>
        <div class="metric__note" id="m-evidence-note">‚Äî</div>
      </div>

      <div class="card metric metric--weighted" id="m-limitation" data-level="unknown">
        <div class="metric__head"><div class="metric__name">–î–∞–≤–Ω–æ—Å—Ç—å</div><div class="metric__dot"></div></div>
        <div class="metric__label" id="m-limitation-label">‚Äî</div>
        <div class="metric__note" id="m-limitation-note">‚Äî</div>
      </div>

    </div>

    <div class="notice notice--neutral results__note">
      –≠—Ç–æ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–æ–Ω–Ω—ã–π –ø—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω—ã–π –∞–Ω–∞–ª–∏–∑ –∏ –Ω–µ —è–≤–ª—è–µ—Ç—Å—è —é—Ä–∏–¥–∏—á–µ—Å–∫–æ–π –∫–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏–µ–π.
    </div>

    <div class="actions">
      <button type="button" class="btn" id="btnPlanOpen">–û—Ç–∫—Ä—ã—Ç—å –ø–ª–∞–Ω –¥–µ–π—Å—Ç–≤–∏–π</button>
      <button type="button" class="btn" id="btnEdit">–ò–∑–º–µ–Ω–∏—Ç—å –æ—Ç–≤–µ—Ç—ã</button>
      <button type="button" class="btn secondary" id="btnResetBottom">–°–±—Ä–æ—Å–∏—Ç—å</button>
    </div>

    <section class="card" id="actionPlanCard" hidden>

      <div style="display:flex; justify-content:space-between; align-items:center; margin-bottom:10px;">
        <h3 style="margin:0;">–†–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–π –ø–ª–∞–Ω –¥–µ–π—Å—Ç–≤–∏–π</h3>
        <button type="button" class="btn secondary" id="btnPlanClose">–ó–∞–∫—Ä—ã—Ç—å</button>
      </div>

      <p class="muted">
        –ü–æ–∫–∞–∑–∞–Ω—ã —Ç–æ–ª—å–∫–æ —Ç–µ –±–ª–æ–∫–∏, –≥–¥–µ –æ–±–Ω–∞—Ä—É–∂–µ–Ω—ã —Å–ª–∞–±—ã–µ –∏–ª–∏ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –∑–æ–Ω—ã —Ä–∏—Å–∫–∞.
      </p>

      <div class="notice" id="planConditions">
        <strong>–ü–µ—Ä–µ–¥ —Å–ª–µ–¥—É—é—â–∏–º —à–∞–≥–æ–º</strong>
        <ul class="list" id="planConditionsList"></ul>
      </div>

      <div id="planBlocks" style="margin-top:16px;"></div>

      <p class="muted small" style="margin-top:14px;">
        –ü—Ä–∏–º–µ—á–∞–Ω–∏–µ: —ç—Ç–æ—Ç –ø–ª–∞–Ω –Ω–æ—Å–∏—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–æ–Ω–Ω—ã–π —Ö–∞—Ä–∞–∫—Ç–µ—Ä –∏ –Ω–µ —è–≤–ª—è–µ—Ç—Å—è —é—Ä–∏–¥–∏—á–µ—Å–∫–æ–π –∫–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏–µ–π.
      </p>

    </section>

  </section>

  <footer class="footer">
    <p class="small muted">–†—É—Å—Å–∫–∞—è –≤–µ—Ä—Å–∏—è –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ.</p>
    <p class="small muted">¬© 2026 O√ú Solvere (Solvere Lab). –í—Å–µ –ø—Ä–∞–≤–∞ –∑–∞—â–∏—â–µ–Ω—ã.</p>
  </footer>

</main>

<script>
(() => {
  // Separate key so RU and ET don't overwrite each other in the same session
  const STORAGE_KEY = "solverelab_claim_precheck_ru_v1";

  const stepsWrap = document.getElementById("steps");
  const steps = Array.from(document.querySelectorAll(".step"));
  const results = document.getElementById("results");

  const btnStart = document.getElementById("btnStart");
  const btnEdit = document.getElementById("btnEdit");
  const btnResetBottom = document.getElementById("btnResetBottom");

  const progressFill = document.getElementById("progressFill");
  const progressLabel = document.getElementById("progressLabel");
  const progressBar = document.querySelector(".progressbar");

  const overallCard = document.getElementById("overallCard");
  const overallBadge = document.getElementById("overallBadge");
  const overallTitle = document.getElementById("overallTitle");
  const overallDesc = document.getElementById("overallDesc");

  const gridIds = {
    basis:    { card: "m-basis",     label: "m-basis-label",     note: "m-basis-note" },
    breach:   { card: "m-breach",    label: "m-breach-label",    note: "m-breach-note" },
    damage:   { card: "m-damage",    label: "m-damage-label",    note: "m-damage-note" },
    defenses: { card: "m-defenses",  label: "m-defenses-label",  note: "m-defenses-note" },
    evidence: { card: "m-evidence",  label: "m-evidence-label",  note: "m-evidence-note" },
    limitation:{card: "m-limitation",label: "m-limitation-label",note: "m-limitation-note" },
  };

  const FIELDS = ["basis", "breach", "damage", "evidence", "defenses", "limitation"];

  const WEIGHTS = { basis:1, breach:1, damage:1, defenses:1, evidence:2, limitation:2 };
  const CRITICAL_FIELDS = ["evidence", "limitation"];

  const COMPONENT_TEXT = {
    basis: {
      3: { label: "–°–∏–ª—å–Ω—ã–π",    note: "–ù–∞–ª–∏—á–∏–µ –æ–±—è–∑–∞—Ç–µ–ª—å—Å—Ç–≤–∞ —á—ë—Ç–∫–æ —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è –∏ –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç—Å—è." },
      2: { label: "–î–æ—Å—Ç–∞—Ç–æ—á–Ω—ã–π",note: "–û–±—è–∑–∞—Ç–µ–ª—å—Å—Ç–≤–æ —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è, –Ω–æ –µ–≥–æ —Å–æ–¥–µ—Ä–∂–∞–Ω–∏–µ —Ç—Ä–µ–±—É–µ—Ç —É—Ç–æ—á–Ω–µ–Ω–∏—è." },
      1: { label: "–°–ª–∞–±—ã–π",     note: "–°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ –æ–±—è–∑–∞—Ç–µ–ª—å—Å—Ç–≤–∞ –Ω–µ—è—Å–Ω–æ –∏–ª–∏ —Ç—Ä–µ–±—É–µ—Ç —Å—É—â–µ—Å—Ç–≤–µ–Ω–Ω–æ–≥–æ —É—Ç–æ—á–Ω–µ–Ω–∏—è." },
      0: { label: "–ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–π",note: "–ü–æ –ø–µ—Ä–≤–∏—á–Ω–æ–π –æ—Ü–µ–Ω–∫–µ –Ω–∞–ª–∏—á–∏–µ –æ–±—è–∑–∞—Ç–µ–ª—å—Å—Ç–≤–∞ –Ω–µ —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è." },
    },
    breach: {
      3: { label: "–°–∏–ª—å–Ω—ã–π",    note: "–ù–∞—Ä—É—à–µ–Ω–∏–µ —á—ë—Ç–∫–æ –æ–ø–∏—Å—É–µ–º–æ –∏ —Å–≤—è–∑–∞–Ω–æ —Å –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–º –æ–±—è–∑–∞—Ç–µ–ª—å—Å—Ç–≤–æ–º." },
      2: { label: "–î–æ—Å—Ç–∞—Ç–æ—á–Ω—ã–π",note: "–ù–∞—Ä—É—à–µ–Ω–∏–µ –≤–µ—Ä–æ—è—Ç–Ω–æ, –Ω–æ —Å–≤—è–∑—å —Å –æ–±—è–∑–∞—Ç–µ–ª—å—Å—Ç–≤–æ–º –Ω—É–∂–Ω–æ —É—Ç–æ—á–Ω–∏—Ç—å." },
      1: { label: "–°–ª–∞–±—ã–π",     note: "–ù–∞–ª–∏—á–∏–µ –Ω–∞—Ä—É—à–µ–Ω–∏—è –∏–ª–∏ –µ–≥–æ —Å–≤—è–∑—å —Å –æ–±—è–∑–∞—Ç–µ–ª—å—Å—Ç–≤–æ–º –º–æ–∂–µ—Ç –±—ã—Ç—å —Å–ø–æ—Ä–Ω–æ–π." },
      0: { label: "–ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–π",note: "–ù–∞—Ä—É—à–µ–Ω–∏–µ –∏–ª–∏ –µ–≥–æ —Å–≤—è–∑—å —Å –æ–±—è–∑–∞—Ç–µ–ª—å—Å—Ç–≤–æ–º –Ω–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ —É—Å—Ç–∞–Ω–æ–≤–∏–º—ã." },
    },
    damage: {
      3: { label: "–°–∏–ª—å–Ω—ã–π",    note: "–°—É–º–º–∞ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∞ –∏ –æ–±–æ—Å–Ω–æ–≤–∞–Ω–∞." },
      2: { label: "–î–æ—Å—Ç–∞—Ç–æ—á–Ω—ã–π",note: "–°—É–º–º–∞ –æ–ø—Ä–µ–¥–µ–ª–∏–º–∞, –Ω–æ —Ä–∞—Å—á—ë—Ç –∏–ª–∏ –æ–±–æ—Å–Ω–æ–≤–∞–Ω–∏–µ —Ç—Ä–µ–±—É–µ—Ç –¥–æ–ø–æ–ª–Ω–µ–Ω–∏—è." },
      1: { label: "–°–ª–∞–±—ã–π",     note: "–°—É–º–º–∞ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∞ –Ω–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –∏–ª–∏ —Ç—Ä–µ–±—É–µ—Ç –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ–≥–æ –æ–±–æ—Å–Ω–æ–≤–∞–Ω–∏—è." },
      0: { label: "–ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–π",note: "–°—É–º–º–∞ –Ω–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∞ –∏ –Ω–µ –æ–±–æ—Å–Ω–æ–≤–∞–Ω–∞." },
    },
    evidence: {
      3: { label: "–°–∏–ª—å–Ω—ã–π",    note: "–ï—Å—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω—ã—Ö –∏ –æ–±—ä–µ–∫—Ç–∏–≤–Ω—ã—Ö –¥–æ–∫–∞–∑–∞—Ç–µ–ª—å—Å—Ç–≤." },
      2: { label: "–î–æ—Å—Ç–∞—Ç–æ—á–Ω—ã–π",note: "–î–æ–∫–∞–∑–∞—Ç–µ–ª—å—Å—Ç–≤–∞ –µ—Å—Ç—å, –Ω–æ –∏—Ö –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ—Å—Ç—å –º–æ–∂–µ—Ç –±—ã—Ç—å —Å–ø–æ—Ä–Ω–æ–π." },
      1: { label: "–°–ª–∞–±—ã–π",     note: "–î–æ–∫–∞–∑–∞—Ç–µ–ª—å—Å—Ç–≤–∞ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω—ã –∏–ª–∏ –∫–æ—Å–≤–µ–Ω–Ω—ã–µ; –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ—Å—Ç—å –ø–æ–¥ –≤–æ–ø—Ä–æ—Å–æ–º." },
      0: { label: "–ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–π",note: "–†–µ–ª–µ–≤–∞–Ω—Ç–Ω—ã—Ö –¥–æ–∫–∞–∑–∞—Ç–µ–ª—å—Å—Ç–≤ –Ω–µ—Ç –∏–ª–∏ –æ–Ω–∏ –Ω–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–∞—é—Ç –ø–æ–∑–∏—Ü–∏—é." },
    },
    defenses: {
      3: { label: "–°–∏–ª—å–Ω—ã–π",    note: "–°—É—â–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ –≤–æ–∑—Ä–∞–∂–µ–Ω–∏—è –ø–æ –ø–µ—Ä–≤–∏—á–Ω–æ–π –æ—Ü–µ–Ω–∫–µ –º–∞–ª–æ–≤–µ—Ä–æ—è—Ç–Ω—ã." },
      2: { label: "–î–æ—Å—Ç–∞—Ç–æ—á–Ω—ã–π",note: "–í–æ–∑–º–æ–∂–Ω—ã–µ –≤–æ–∑—Ä–∞–∂–µ–Ω–∏—è –º–æ–≥—É—Ç –ø–æ–≤–ª–∏—è—Ç—å –Ω–∞ –æ—Ü–µ–Ω–∫—É —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è." },
      1: { label: "–°–ª–∞–±—ã–π",     note: "–í–æ–∑—Ä–∞–∂–µ–Ω–∏—è –º–æ–≥—É—Ç —Å—É—â–µ—Å—Ç–≤–µ–Ω–Ω–æ –ø–æ–≤–ª–∏—è—Ç—å –Ω–∞ –æ—Ü–µ–Ω–∫—É —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è." },
      0: { label: "–ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–π",note: "–í–æ–∑—Ä–∞–∂–µ–Ω–∏—è –º–æ–≥—É—Ç —Å—É—â–µ—Å—Ç–≤–µ–Ω–Ω–æ –æ–≥—Ä–∞–Ω–∏—á–∏—Ç—å –∂–∏–∑–Ω–µ—Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç—å —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è." },
    },
    limitation: {
      3: { label: "–°–∏–ª—å–Ω—ã–π",    note: "–†–∏—Å–∫ —Å—Ä–æ–∫–∞ –¥–∞–≤–Ω–æ—Å—Ç–∏ –ø–æ –ø–µ—Ä–≤–∏—á–Ω–æ–π –æ—Ü–µ–Ω–∫–µ –Ω–µ –≤—ã—è–≤–ª–µ–Ω." },
      2: { label: "–î–æ—Å—Ç–∞—Ç–æ—á–Ω—ã–π",note: "–†–∏—Å–∫ –º–∞–ª–æ–≤–µ—Ä–æ—è—Ç–µ–Ω, –Ω–æ —Ç—Ä–µ–±—É–µ—Ç –ø—Ä–æ–≤–µ—Ä–∫–∏." },
      1: { label: "–°–ª–∞–±—ã–π",     note: "–†–∏—Å–∫ –º–æ–∂–µ—Ç –ø—Ä–∏—Å—É—Ç—Å—Ç–≤–æ–≤–∞—Ç—å –∏ —Ç—Ä–µ–±—É–µ—Ç –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ–π –ø—Ä–æ–≤–µ—Ä–∫–∏." },
      0: { label: "–ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–π",note: "–†–∏—Å–∫ –¥–∞–≤–Ω–æ—Å—Ç–∏ –º–æ–∂–µ—Ç —Å—É—â–µ—Å—Ç–≤–µ–Ω–Ω–æ –æ–≥—Ä–∞–Ω–∏—á–∏—Ç—å –≤–∑—ã—Å–∫–∞–Ω–∏–µ." },
    },
  };

  const OVERALL_TEXT = {
    strong:   { badge: "üü¢", title: "–û–±—â–∏–π –ø—Ä–æ—Ñ–∏–ª—å —Ä–∏—Å–∫–∞: —Å–∏–ª—å–Ω—ã–π",    desc: "–ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –≤ —Ü–µ–ª–æ–º –¥–æ—Å—Ç–∞—Ç–æ—á–Ω—ã, –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–π –Ω–µ –≤—ã—è–≤–ª–µ–Ω–æ." },
    moderate: { badge: "üü°", title: "–û–±—â–∏–π –ø—Ä–æ—Ñ–∏–ª—å —Ä–∏—Å–∫–∞: —É–º–µ—Ä–µ–Ω–Ω—ã–π",  desc: "–ï—Å—Ç—å —Å–ª–∞–±—ã–µ –º–µ—Å—Ç–∞ –∏–ª–∏ –Ω–µ–æ–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω–æ—Å—Ç—å. –ü–µ—Ä–µ–¥ —Å–ª–µ–¥—É—é—â–∏–º —à–∞–≥–æ–º —Å—Ç–æ–∏—Ç —É—Ç–æ—á–Ω–∏—Ç—å –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã." },
    weak:     { badge: "üî¥", title: "–û–±—â–∏–π –ø—Ä–æ—Ñ–∏–ª—å —Ä–∏—Å–∫–∞: —Å–ª–∞–±—ã–π",     desc: "–ï—Å—Ç—å –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –ø—Ä–æ–±–µ–ª—ã –∏–ª–∏ –Ω–µ—Å–∫–æ–ª—å–∫–æ –∑–Ω–∞—á–∏–º—ã—Ö –∑–æ–Ω —Ä–∏—Å–∫–∞. –¢—Ä–µ–±–æ–≤–∞–Ω–∏–µ –Ω—É–∂–¥–∞–µ—Ç—Å—è –≤ –¥–æ—Ä–∞–±–æ—Ç–∫–µ." },
  };

  let currentStep = 1;

  function qs(sel, root=document){ return root.querySelector(sel); }
  function qsa(sel, root=document){ return Array.from(root.querySelectorAll(sel)); }

  function getSaved(){
    try {
      const raw = sessionStorage.getItem(STORAGE_KEY);
      return raw ? JSON.parse(raw) : {};
    } catch { return {}; }
  }
  function save(data){ sessionStorage.setItem(STORAGE_KEY, JSON.stringify(data)); }
  function clearSaved(){ sessionStorage.removeItem(STORAGE_KEY); }

  function setProgress(step){
    const pct = Math.round((step - 1) / 6 * 100);
    progressFill.style.width = pct + "%";
    progressLabel.textContent = `–®–∞–≥ ${step} / 6`;
    progressBar.setAttribute("aria-valuenow", String(step - 1));
  }

  function showStep(n){
    currentStep = n;
    stepsWrap.hidden = false;
    results.hidden = true;
    steps.forEach(s => s.hidden = (Number(s.dataset.step) !== n));
    setProgress(n);
    stepsWrap.scrollIntoView({ behavior:"smooth", block:"start" });
  }

  function showResults(){
    stepsWrap.hidden = false;
    steps.forEach(s => s.hidden = true);
    results.hidden = false;
    progressFill.style.width = "100%";
    progressLabel.textContent = "–®–∞–≥ 6 / 6";
    progressBar.setAttribute("aria-valuenow", "6");
    results.scrollIntoView({ behavior:"smooth", block:"start" });
  }

  function getSelectedValue(field){
    const el = qs(`input[name="${field}"]:checked`);
    if (!el) return null;
    const v = Number(el.value);
    return Number.isFinite(v) ? v : null;
  }
  function setSelectedValue(field, value){
    const el = qs(`input[name="${field}"][value="${value}"]`);
    if (el) el.checked = true;
  }

  function validateStepAnswered(stepNumber){
    const stepEl = steps.find(s => Number(s.dataset.step) === stepNumber);
    if (!stepEl) return true;
    const radio = qs('input[type="radio"]', stepEl);
    if (!radio) return true;
    const field = radio.name;
    const v = getSelectedValue(field);
    return v !== null;
  }

  function fieldForStep(stepNumber){
    const stepEl = steps.find(s => Number(s.dataset.step) === stepNumber);
    if (!stepEl) return null;
    const radio = qs('input[type="radio"]', stepEl);
    return radio ? radio.name : null;
  }

  function resumeFromAnswers(saved){
    for (let i=1;i<=6;i++){
      const field = fieldForStep(i);
      if (!field) continue;
      if (saved[field] === undefined || saved[field] === null) return i;
    }
    return 6;
  }

  function computeModel(scores){
    let weightedSum = 0;
    let maxSum = 0;
    for (const f of FIELDS){
      const w = WEIGHTS[f] ?? 1;
      const v = scores[f];
      weightedSum += v * w;
      maxSum += 3 * w;
    }
    const ratio = maxSum > 0 ? (weightedSum / maxSum) : 0;
    const crit0 = CRITICAL_FIELDS.filter(f => scores[f] === 0).length;

    let band = "moderate";
    if (ratio >= 0.75) band = "strong";
    else if (ratio < 0.5) band = "weak";

    if (crit0 >= 2) band = "weak";
    else if (crit0 >= 1 && band === "strong") band = "moderate";

    return { band, ratio };
  }

  function levelFromScore(score){
    if (score === 3) return "strong";
    if (score === 2) return "moderate";
    if (score === 1) return "weak";
    return "critical";
  }

  function renderDashboard(scores){
    const { band } = computeModel(scores);
    const o = OVERALL_TEXT[band];
    overallBadge.textContent = o.badge;
    overallTitle.textContent = o.title;
    overallDesc.textContent = o.desc;
    overallCard.dataset.level = band;

    for (const f of FIELDS){
      const score = scores[f];
      const t = COMPONENT_TEXT[f][score];
      const ids = gridIds[f];
      const card = document.getElementById(ids.card);
      document.getElementById(ids.label).textContent = t.label;
      document.getElementById(ids.note).textContent = t.note;
      card.dataset.level = levelFromScore(score);
    }
  }

  function readAllAnswersFromDOM(){
    const out = {};
    for (const f of FIELDS){
      const v = getSelectedValue(f);
      if (v !== null) out[f] = v;
    }
    return out;
  }

  function applySavedToDOM(saved){
    for (const f of FIELDS){
      const v = saved[f];
      if (v === 0 || v === 1 || v === 2 || v === 3){
        setSelectedValue(f, v);
      }
    }
  }

  function allAnswered(saved){
    return FIELDS.every(f => (saved[f] === 0 || saved[f] === 1 || saved[f] === 2 || saved[f] === 3));
  }

  function bindAnswerPersistence(){
    document.addEventListener("change", (e) => {
      const inp = e.target;
      if (!(inp instanceof HTMLInputElement)) return;
      if (inp.type !== "radio") return;

      const field = inp.name;
      if (!FIELDS.includes(field)) return;

      const saved = getSaved();
      saved[field] = Number(inp.value);
      save(saved);
    });
  }

  function resetAll(){
    qsa('input[type="radio"]').forEach(i => (i.checked = false));
    clearSaved();

    progressFill.style.width = "0%";
    progressLabel.textContent = "–®–∞–≥ 0 / 6";
    progressBar.setAttribute("aria-valuenow", "0");

    results.hidden = true;
    stepsWrap.hidden = true;

    overallCard.dataset.level = "unknown";
    overallBadge.textContent = "‚Äî";
    overallTitle.textContent = "–û–±—â–∏–π –ø—Ä–æ—Ñ–∏–ª—å —Ä–∏—Å–∫–∞";
    overallDesc.textContent = "–ó–∞–ø–æ–ª–Ω–∏—Ç–µ –∞–Ω–∫–µ—Ç—É, —á—Ç–æ–±—ã —É–≤–∏–¥–µ—Ç—å –æ—Ü–µ–Ω–∫—É.";

    for (const f of FIELDS) {
      const ids = gridIds[f];
      const card = document.getElementById(ids.card);
      document.getElementById(ids.label).textContent = "‚Äî";
      document.getElementById(ids.note).textContent = "‚Äî";
      card.dataset.level = "unknown";
    }

    btnStart.textContent = "–ù–∞—á–∞—Ç—å –∞–Ω–∞–ª–∏–∑";
    document.getElementById("app").scrollIntoView({ behavior:"smooth", block:"start" });
  }

  function bindNavAndInfo(){
    document.addEventListener("click", (e) => {
      const btn = e.target.closest("button");
      if (!btn) return;

      if (btn.classList.contains("infoToggle")){
        const infoId = btn.getAttribute("data-info");
        const infoEl = document.getElementById(infoId);
        const expanded = btn.getAttribute("aria-expanded") === "true";
        btn.setAttribute("aria-expanded", String(!expanded));
        infoEl.hidden = expanded;
        return;
      }

      const action = btn.getAttribute("data-action");
      if (!action) return;

      if (action === "back"){
        if (currentStep > 1) showStep(currentStep - 1);
        return;
      }

      if (action === "next"){
        if (!validateStepAnswered(currentStep)){
          alert("–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤—ã–±–µ—Ä–∏—Ç–µ –≤–∞—Ä–∏–∞–Ω—Ç –æ—Ç–≤–µ—Ç–∞, —á—Ç–æ–±—ã –ø—Ä–æ–¥–æ–ª–∂–∏—Ç—å.");
          return;
        }
        if (currentStep < 6) showStep(currentStep + 1);
        return;
      }

      if (action === "finish"){
        if (!validateStepAnswered(currentStep)){
          alert("–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤—ã–±–µ—Ä–∏—Ç–µ –≤–∞—Ä–∏–∞–Ω—Ç –æ—Ç–≤–µ—Ç–∞, —á—Ç–æ–±—ã —É–≤–∏–¥–µ—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç.");
          return;
        }

        const saved = { ...getSaved(), ...readAllAnswersFromDOM() };
        save(saved);

        if (!allAnswered(saved)){
          alert("–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –æ—Ç–≤–µ—Ç—å—Ç–µ –Ω–∞ –≤—Å–µ –±–ª–æ–∫–∏, —á—Ç–æ–±—ã —É–≤–∏–¥–µ—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç.");
          const step = resumeFromAnswers(saved);
          showStep(step);
          return;
        }

        renderDashboard(saved);
        showResults();
        return;
      }
    });
  }

  function hasAnyAnswers(saved){
    if (!saved) return false;
    return FIELDS.some(f => saved[f] === 0 || saved[f] === 1 || saved[f] === 2 || saved[f] === 3);
  }

  function initFromStorage(){
    const saved = getSaved();

    btnStart.textContent = hasAnyAnswers(saved) ? "–ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å" : "–ù–∞—á–∞—Ç—å –∞–Ω–∞–ª–∏–∑";

    if (!saved || Object.keys(saved).length === 0) return;

    applySavedToDOM(saved);

    const step = resumeFromAnswers(saved);
    stepsWrap.hidden = false;
    showStep(step);

    if (allAnswered(saved) && saved.__finished === true){
      renderDashboard(saved);
      showResults();
    }
  }

  function markFinished(){
    const saved = getSaved();
    saved.__finished = true;
    save(saved);
  }

  const _showResults = showResults;
  showResults = function(){
    markFinished();
    _showResults();
  };

  btnStart.addEventListener("click", () => showStep(1));
  btnEdit?.addEventListener("click", () => showStep(1));
  btnResetBottom?.addEventListener("click", resetAll);

  bindNavAndInfo();
  bindAnswerPersistence();
  initFromStorage();

  // --- Action plan (RU)
  const btnPlanOpen = document.getElementById("btnPlanOpen");
  const btnPlanClose = document.getElementById("btnPlanClose");
  const actionPlanCard = document.getElementById("actionPlanCard");
  const planBlocks = document.getElementById("planBlocks");
  const planConditionsList = document.getElementById("planConditionsList");

 function decisionConditionsFromScores(scores){
  const out = [];

  if (scores.limitation <= 1) out.push("–í–æ–ø—Ä–æ—Å —Å—Ä–æ–∫–∞ –¥–∞–≤–Ω–æ—Å—Ç–∏ —Ç—Ä–µ–±—É–µ—Ç –ø—Ä–æ–≤–µ—Ä–∫–∏.");
  if (scores.evidence <= 1) out.push("–î–æ–∫–∞–∑–∞—Ç–µ–ª—å—Å—Ç–≤–µ–Ω–Ω—É—é –±–∞–∑—É –Ω—É–∂–Ω–æ —É—Å–∏–ª–∏—Ç—å.");
  if (scores.basis <= 1 || scores.breach <= 1 || scores.damage <= 1){
    const parts = [];
    if (scores.basis <= 1) parts.push("–æ—Å–Ω–æ–≤–∞–Ω–∏–µ");
    if (scores.breach <= 1) parts.push("–Ω–∞—Ä—É—à–µ–Ω–∏–µ");
    if (scores.damage <= 1) parts.push("—É–±—ã—Ç–∫–∏");
    out.push(`–°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è —Ç—Ä–µ–±—É–µ—Ç —É—Ç–æ—á–Ω–µ–Ω–∏—è: ${parts.join(", ")}.`);
  }
  if (scores.defenses === 0) out.push("–¢—Ä–µ–±—É–µ—Ç—Å—è –ø—Ä–æ—Ä–∞–±–æ—Ç–∞—Ç—å –≤–æ–∑–º–æ–∂–Ω—ã–µ –≤–æ–∑—Ä–∞–∂–µ–Ω–∏—è.");

  return out.slice(0, 3);
}

const TASKS = {
  basis: {
    title: "–û—Å–Ω–æ–≤–∞–Ω–∏–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è",
    items: [
      "–°—Ñ–æ—Ä–º—É–ª–∏—Ä—É–π—Ç–µ –æ–¥–Ω–∏–º –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ–º: –∫—Ç–æ –¥–æ–ª–∂–µ–Ω –±—ã–ª —á—Ç–æ —Å–¥–µ–ª–∞—Ç—å, —á—Ç–æ –∏–º–µ–Ω–Ω–æ –∏ –∫–æ–≥–¥–∞.",
      "–£–∫–∞–∂–∏—Ç–µ, –Ω–∞ —á—ë–º –æ—Å–Ω–æ–≤–∞–Ω–æ —ç—Ç–æ –æ–±—è–∑–∞—Ç–µ–ª—å—Å—Ç–≤–æ (–Ω–∞–ø—Ä–∏–º–µ—Ä: –¥–æ–≥–æ–≤–æ—Ä, —Å–æ–≥–ª–∞—à–µ–Ω–∏–µ, –ø–µ—Ä–µ–ø–∏—Å–∫–∞, –∑–∞–∫–æ–Ω).",
      "–û–ø–∏—à–∏—Ç–µ –≤ 3‚Äì5 –∫–æ—Ä–æ—Ç–∫–∏—Ö –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è—Ö, –≤ —á—ë–º —Å–æ—Å—Ç–æ—è–ª–æ —Å–æ–¥–µ—Ä–∂–∞–Ω–∏–µ –æ–±—è–∑–∞—Ç–µ–ª—å—Å—Ç–≤–∞ (–±–µ–∑ –æ—Ü–µ–Ω–æ–∫ –∏ –ø—Ä–µ–¥–ø–æ–ª–æ–∂–µ–Ω–∏–π).",
      "–û–ø—Ä–µ–¥–µ–ª–∏—Ç–µ, —á–µ–≥–æ –í—ã —Ñ–∞–∫—Ç–∏—á–µ—Å–∫–∏ —Ç—Ä–µ–±—É–µ—Ç–µ (–Ω–∞–ø—Ä–∏–º–µ—Ä: –¥–µ–Ω—å–≥–∏, –∏—Å–ø–æ–ª–Ω–µ–Ω–∏–µ –æ–±—è–∑–∞—Ç–µ–ª—å—Å—Ç–≤–∞, –≤–æ–∑–º–µ—â–µ–Ω–∏–µ —É–±—ã—Ç–∫–æ–≤).",
    ],
  },

  breach: {
    title: "–ù–∞—Ä—É—à–µ–Ω–∏–µ",
    items: [
      "–û–ø–∏—à–∏—Ç–µ —Ñ–∞–∫—Ç–∏—á–µ—Å–∫–∏: —á—Ç–æ —Å–¥–µ–ª–∞–Ω–æ –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ, —Å –æ–ø–æ–∑–¥–∞–Ω–∏–µ–º –∏–ª–∏ –Ω–µ —Å–¥–µ–ª–∞–Ω–æ.",
      "–°–≤—è–∂–∏—Ç–µ –Ω–∞—Ä—É—à–µ–Ω–∏–µ —Å –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–º –æ–±—è–∑–∞—Ç–µ–ª—å—Å—Ç–≤–æ–º (–∫–∞–∫–æ–µ –æ–±–µ—â–∞–Ω–∏–µ/—É—Å–ª–æ–≤–∏–µ –Ω–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–æ).",
      "–°–æ—Å—Ç–∞–≤—å—Ç–µ –ø—Ä–æ—Å—Ç—É—é —Ö—Ä–æ–Ω–æ–ª–æ–≥–∏—é: –¥–∞—Ç–∞, —á—Ç–æ –ø—Ä–æ–∏–∑–æ—à–ª–æ, –∏–∑ —á–µ–≥–æ —Å–ª–µ–¥—É–µ—Ç (–Ω–∞–ø—Ä–∏–º–µ—Ä: e-mail, —Å—á—ë—Ç, —Å–æ–æ–±—â–µ–Ω–∏–µ).",
    ],
  },

  damage: {
    title: "–£–±—ã—Ç–∫–∏ / —Å—É–º–º–∞",
    items: [
      "–ó–∞–ø–∏—à–∏—Ç–µ, –∏–∑ —á–µ–≥–æ —Å–æ—Å—Ç–æ–∏—Ç —Å—É–º–º–∞ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è.",
      "–†–∞—Å–ø–∏—à–∏—Ç–µ —Ä–∞—Å—á—ë—Ç (–Ω–∞–ø—Ä–∏–º–µ—Ä: —Å—É–º–º–∞ √ó –ø–µ—Ä–∏–æ–¥, –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π —Å—á—ë—Ç, –¥–æ–∫—É–º–µ–Ω—Ç—ã —Ä–∞—Å—Ö–æ–¥–æ–≤).",
      "–†–∞–∑–¥–µ–ª–∏—Ç–µ: —Ñ–∞–∫—Ç–∏—á–µ—Å–∫–∏–π —É—â–µ—Ä–± –∏ –æ—Ü–µ–Ω–æ—á–Ω—ã–µ/–±—É–¥—É—â–∏–µ —Ä–∞—Å—Ö–æ–¥—ã.",
      "–ü—Ä–æ–¥—É–º–∞–π—Ç–µ, –ø–æ—á–µ–º—É –∏–º–µ–Ω–Ω–æ —ç—Ç–æ –Ω–∞—Ä—É—à–µ–Ω–∏–µ –ø—Ä–∏–≤–µ–ª–æ –∫ —É—â–µ—Ä–±—É (–∫–∞–∫ –Ω–∞—Ä—É—à–µ–Ω–∏–µ –≤—ã–∑–≤–∞–ª–æ –¥–µ–Ω–µ–∂–Ω—ã–µ –ø–æ—Ç–µ—Ä–∏).",
    ],
  },

  evidence: {
    title: "–î–æ–∫–∞–∑–∞—Ç–µ–ª—å—Å—Ç–≤–∞",
    items: [
      "–°–æ—Å—Ç–∞–≤—å—Ç–µ —Å–ø–∏—Å–æ–∫ –∏–º–µ—é—â–∏—Ö—Å—è –¥–æ–∫–∞–∑–∞—Ç–µ–ª—å—Å—Ç–≤ (–Ω–∞–ø—Ä–∏–º–µ—Ä: –¥–æ–≥–æ–≤–æ—Ä, –ø–µ—Ä–µ–ø–∏—Å–∫–∞, —Å—á—ë—Ç, –∞–∫—Ç, —Ñ–æ—Ç–æ).",
      "–£–∫–∞–∂–∏—Ç–µ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –¥–æ–∫–∞–∑–∞—Ç–µ–ª—å—Å—Ç–≤–∞, –∫–∞–∫–æ–µ —É—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –æ–Ω–æ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–∞–µ—Ç (–Ω–∞–ø—Ä–∏–º–µ—Ä: –Ω–∞–ª–∏—á–∏–µ –æ–±—è–∑–∞—Ç–µ–ª—å—Å—Ç–≤–∞, —Ñ–∞–∫—Ç –Ω–∞—Ä—É—à–µ–Ω–∏—è, —Ä–∞–∑–º–µ—Ä —É—â–µ—Ä–±–∞).",
      "–ü—Ä–æ–≤–µ—Ä—å—Ç–µ, –Ω–µ—Ç –ª–∏ –≤–∞–∂–Ω—ã—Ö —É—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–π –±–µ–∑ –¥–æ–∫–∞–∑–∞—Ç–µ–ª—å—Å—Ç–≤.",
      "–°–æ–±–µ—Ä–∏—Ç–µ —Ñ–∞–π–ª—ã –≤ –ª–æ–≥–∏—á–Ω—É—é —Å—Ç—Ä—É–∫—Ç—É—Ä—É (–Ω–∞–ø—Ä–∏–º–µ—Ä: –ø–∞–ø–∫–∏ –∏–ª–∏ –Ω–∞–∑–≤–∞–Ω–∏—è —Ñ–∞–π–ª–æ–≤).",
    ],
  },

  defenses: {
    title: "–í–æ–∑—Ä–∞–∂–µ–Ω–∏—è",
    items: [
      "–ü–æ–¥—É–º–∞–π—Ç–µ, –∫–∞–∫–∏–µ —É—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è –¥—Ä—É–≥–∞—è —Å—Ç–æ—Ä–æ–Ω–∞ –º–æ–∂–µ—Ç –æ—Å–ø–∞—Ä–∏–≤–∞—Ç—å.",
      "–ó–∞–ø–∏—à–∏—Ç–µ 2‚Äì3 –Ω–∞–∏–±–æ–ª–µ–µ –≤–µ—Ä–æ—è—Ç–Ω—ã—Ö –≤–æ–∑—Ä–∞–∂–µ–Ω–∏—è.",
      "–ö –∫–∞–∂–¥–æ–º—É –≤–æ–∑—Ä–∞–∂–µ–Ω–∏—é –¥–æ–±–∞–≤—å—Ç–µ –∫—Ä–∞—Ç–∫–∏–π –æ—Ç–≤–µ—Ç (—Ñ–∞–∫—Ç + –∏–º–µ—é—â–µ–µ—Å—è –¥–æ–∫–∞–∑–∞—Ç–µ–ª—å—Å—Ç–≤–æ).",
      "–û—Ç–º–µ—Ç—å—Ç–µ, –∫–∞–∫–æ–µ –≤–æ–∑—Ä–∞–∂–µ–Ω–∏–µ –∫–∞–∂–µ—Ç—Å—è –í–∞–º —Å–∞–º—ã–º —Å–ª–∞–±—ã–º –º–µ—Å—Ç–æ–º.",
    ],
  },

  limitation: {
    title: "–°—Ä–æ–∫ –¥–∞–≤–Ω–æ—Å—Ç–∏",
    items: [
      "–ó–∞–ø–∏—à–∏—Ç–µ –∫–ª—é—á–µ–≤—ã–µ –¥–∞—Ç—ã: –∫–æ–≥–¥–∞ –±—ã–ª–æ —Å–æ–≥–ª–∞—à–µ–Ω–∏–µ, –∫–æ–≥–¥–∞ –ø—Ä–æ–∏–∑–æ—à–ª–æ –Ω–∞—Ä—É—à–µ–Ω–∏–µ, –∫–æ–≥–¥–∞ –ø—Ä–æ—è–≤–∏–ª—Å—è —É—â–µ—Ä–±, –∫–æ–≥–¥–∞ —É–≤–µ–¥–æ–º–ª—è–ª–∏ –¥—Ä—É–≥—É—é —Å—Ç–æ—Ä–æ–Ω—É (–µ—Å–ª–∏ —É–≤–µ–¥–æ–º–ª—è–ª–∏).",
      "–û–ø—Ä–µ–¥–µ–ª–∏—Ç–µ, –∫–æ–≥–¥–∞ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏–µ —Å—Ç–∞–ª–æ —Ä–µ–∞–ª—å–Ω–æ –ø–æ–¥–ª–µ–∂–∞—â–∏–º –≤–∑—ã—Å–∫–∞–Ω–∏—é (–º–æ–º–µ–Ω—Ç, –∫–æ–≥–¥–∞ –æ–±—è–∑–∞–Ω–Ω–æ—Å—Ç—å –¥–æ–ª–∂–Ω–∞ –±—ã–ª–∞ –±—ã—Ç—å –∏—Å–ø–æ–ª–Ω–µ–Ω–∞).",
      "–ü—Ä–æ–≤–µ—Ä—å—Ç–µ, –ø—Ä–æ–∏—Å—Ö–æ–¥–∏–ª–æ –ª–∏ —á—Ç–æ-—Ç–æ, —á—Ç–æ –º–æ–≥–ª–æ –ø–æ–≤–ª–∏—è—Ç—å –Ω–∞ —Å—Ä–æ–∫ (–Ω–∞–ø—Ä–∏–º–µ—Ä: –ø–µ—Ä–µ–ø–∏—Å–∫–∞, —á–∞—Å—Ç–∏—á–Ω–∞—è –æ–ø–ª–∞—Ç–∞, –ø–µ—Ä–µ–≥–æ–≤–æ—Ä—ã).",
      "–ü–æ–¥—É–º–∞–π—Ç–µ, –æ—Ç–Ω–æ—Å–∏—Ç—Å—è –ª–∏ —Å–∏—Ç—É–∞—Ü–∏—è –∫ —Å—Ñ–µ—Ä–µ —Å –∏–Ω—ã–º–∏ —Å—Ä–æ–∫–∞–º–∏ (–Ω–∞–ø—Ä–∏–º–µ—Ä: —Ç—Ä—É–¥–æ–≤–æ–π —Å–ø–æ—Ä, –∞—Ä–µ–Ω–¥–∞, –ø–æ—Ç—Ä–µ–±–∏—Ç–µ–ª—å—Å–∫–∏–π —Å–ø–æ—Ä).",
      "–ï—Å–ª–∏ –í—ã –Ω–µ —É–≤–µ—Ä–µ–Ω—ã, —Ä–∞–∑—É–º–Ω–æ —Å—á–∏—Ç–∞—Ç—å —ç—Ç–æ —Ä–∏—Å–∫–æ–º –∏ —É—á–∏—Ç—ã–≤–∞—Ç—å –ø—Ä–∏ –ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–∏ –¥–∞–ª—å–Ω–µ–π—à–∏—Ö —à–∞–≥–æ–≤.",
    ],
  },
};

  function renderActionPlan(scores){
    planBlocks.innerHTML = "";
    planConditionsList.innerHTML = "";

    const conds = decisionConditionsFromScores(scores);
    if (conds.length === 0){
      const li = document.createElement("li");
      li.textContent = "–ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö —É—Å–ª–æ–≤–∏–π –Ω–µ –≤—ã—è–≤–ª–µ–Ω–æ. –ü—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ —É—Ç–æ—á–Ω–∏—Ç–µ –¥–µ—Ç–∞–ª–∏ –ø–µ—Ä–µ–¥ —Å–ª–µ–¥—É—é—â–∏–º —à–∞–≥–æ–º.";
      planConditionsList.appendChild(li);
    } else {
      for (const c of conds){
        const li = document.createElement("li");
        li.textContent = c;
        planConditionsList.appendChild(li);
      }
    }

    const order = ["basis","breach","damage","evidence","defenses","limitation"];
    for (const key of order){
      if (scores[key] > 1) continue;

      const block = document.createElement("div");
      block.className = "qblock";
      block.style.marginTop = "12px";

      const h = document.createElement("h3");
      h.className = "qtitle";
      h.textContent = TASKS[key].title;

      const ul = document.createElement("ul");
      ul.className = "list";
      ul.style.margin = "8px 0 0 18px";

      for (const item of TASKS[key].items){
        const li = document.createElement("li");
        li.textContent = item;
        ul.appendChild(li);
      }

      block.appendChild(h);
      block.appendChild(ul);

      // Penalty / interest calculator link in Damage block
      if (key === "damage") {
  const p = document.createElement("p");
  p.className = "muted small";
  p.style.marginTop = "8px";
  p.innerHTML = `
    –ü—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ –í—ã –º–æ–∂–µ—Ç–µ —Ä–∞—Å—Å—á–∏—Ç–∞—Ç—å –ø–µ–Ω—é –∏ –ø—Ä–æ—Ü–µ–Ω—Ç—ã –Ω–∞
    <a href="https://viivisekalkulaator.ee/calculator/debt" target="_blank" rel="noopener">
      viivisekalkulaator.ee
    </a>.
  `;
  block.appendChild(p);
}
      
      planBlocks.appendChild(block);
    }
  }

  function openPlan(){
    const saved = getSaved();
    if (!saved) return;

    const scores = {};
    for (const f of FIELDS){
      scores[f] = Number(saved[f]);
    }

    renderActionPlan(scores);
    actionPlanCard.hidden = false;
    actionPlanCard.scrollIntoView({ behavior:"smooth", block:"start" });
  }

  function closePlan(){
    actionPlanCard.hidden = true;
  }

  btnPlanOpen?.addEventListener("click", openPlan);
  btnPlanClose?.addEventListener("click", closePlan);
})();
</script>
  
<footer class="footer">
  <p class="small muted">
    ¬© 2026 O√ú Solvere (Solvere Lab). –í—Å–µ –ø—Ä–∞–≤–∞ –∑–∞—â–∏—â–µ–Ω—ã.
  </p>
</footer>

</body>
</html>
